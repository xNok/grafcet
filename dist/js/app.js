function svg_get(t){return'<svg><use xlink:href="sprite.svg#'+t+'"></use></svg>'}$(document).foundation();var prog_step=0,step=0;adj_newVertice(),adj_newVertice(),adj_newVertice(),adj_newVertice(),adj_newVertice(),adj_newAdj(0,1,"join","i0"),adj_newAdj(1,2,"join","i1"),adj_newAdj(1,3,"join","i2"),adj_newAdj(3,4,"join","i3"),adj_newAdj(1,4,"join","i1"),adj_setAction(0,"KM42"),adj_setAction(1,"KM2"),adj_setAction(2,"KM1"),adj_setAction(3,"KM2"),$(document).ready(function(){adj_draw(),$("#grafcet-schema").createGrid();var t=$(".item").first();$(document).on("click",".item",function(e){t.toggleClass("active_item"),$(this).toggleClass("active_item"),t=$(this)}),$(document).on("click",".g_step",function(e){var a=$(this);if(t.hasClass("step")&&(a.children("div.content").text(t.text()+step),a.attr("data-step",step),"Initial_Step"===t.attr("data-type")?(adj_newVertice(!0),a.append(svg_get("initStep"))):(adj_newVertice(),a.append(svg_get("step"))),adj_setCoordinate(step,a.attr("data-x"),a.attr("data-y")),adj_draw(),step++),t.hasClass("connection")){var d=a.attr("data-step");if("undefined"==typeof d)return;if(0===prog_step)edg_write2lastRowCell(0,d),adj_waiting_step=d,prog_step=1;else if(1===prog_step){var i=t.text();edg_write2lastRowCell(1,d),edg_write2lastRowCell(2,i),edg_addRow("#edgeList"),adj_newAdj(adj_waiting_step,d,i,""),adj_draw();var n=adj_getX(adj_waiting_step)-adj_getX(d),s=adj_getY(adj_waiting_step)-adj_getY(d);if(-2===n&&0===s){var _=Number(adj_getX(d))-1,r=adj_getY(d);$(".g_trans[data-x='"+_+"'][data-y='"+r+"']").append(svg_get("join"))}prog_step=0}}})});